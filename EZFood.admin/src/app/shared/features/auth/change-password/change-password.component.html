<div class="container">
  <header class="mt-6">
    <h1 class="text-2xl font-bold text-zinc-900 dark:text-white">Change Password</h1>
    <p class="mt-2 text-zinc-600 dark:text-zinc-300">Update your password frequently to maintain strong account
      security.</p>
  </header>
  <div class=" flex justify-center items-center py-40">
    <div
      class="authCard bg-white dark:bg-zinc-900 rounded   max-w-md  border border-zinc-300 dark:border-zinc-700 w-full p-3 py-8">
      <div class="authCard-header mb-3">
        <div class="authCard-body">
          <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="sm:px-8 px-4">
            <div class="flex flex-wrap">
              @if(errorMessage()) {
              <div class="flex-[1_1_300px] w-full mb-3">
                <app-error [message]="errorMessage()"></app-error>
              </div>
              }

              @if(successMessage()) {
              <div class="flex-[1_1_300px] w-full mb-3">
                <div class="p-3 bg-green-100 text-green-800 rounded">
                  {{ successMessage() }}
                </div>
              </div>
              }

              <div class="flex-[1_1_300px] w-full mb-3">
                <label for="currentPassword" class="text-[1rem] dark:text-white text-black px-2 mb-1 inline-block">
                  Current Password
                </label>
                <div class="relative flex items-center">
                  <input id="currentPassword" type="password" formControlName="currentPassword"
                    placeholder="Enter Your Current Password"
                    class="px-4 py-3 pe-10 bg-white dark:bg-zinc-900 dark:text-white border-solid text-black w-full text-lg border border-zinc-300 dark:border-zinc-700 focus:border-tree-500 rounded outline-none"
                    [class.border-red-500]="changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched" />
                  <lucide-icon [name]="KeyRound" strokeWidth="1"
                    class="text-black dark:text-white w-[1.125rem] h-[1.125rem] absolute right-2"></lucide-icon>
                </div>
                @if(changePasswordForm.get('currentPassword')?.invalid &&
                changePasswordForm.get('currentPassword')?.touched) {
                <small class="text-red-500 px-2">Current password is required</small>
                }
              </div>

              <div class="flex-[1_1_300px] w-full mb-3">
                <label for="newPassword" class="text-[1rem] dark:text-white text-black px-2 mb-1 inline-block">
                  New Password
                </label>
                <div class="relative flex items-center">
                  <input id="newPassword" type="password" formControlName="newPassword"
                    placeholder="Enter Your New Password"
                    class="px-4 py-3 pe-10 bg-white dark:bg-zinc-900 dark:text-white border-solid text-black w-full text-lg border border-zinc-300 dark:border-zinc-700 focus:border-tree-500 rounded outline-none"
                    [class.border-red-500]="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched" />
                  <lucide-icon [name]="KeyRound" strokeWidth="1"
                    class="text-black dark:text-white w-[1.125rem] h-[1.125rem] absolute right-2"></lucide-icon>
                </div>
                @if(changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched) {
                <small class="text-red-500 px-2">
                  Password should be at least 8 characters
                </small>
                }
              </div>

              <div class="flex-[1_1_300px] w-full mb-3">
                <label for="confirmPassword" class="text-[1rem] dark:text-white text-black px-2 mb-1 inline-block">
                  Confirm Password
                </label>
                <div class="relative flex items-center">
                  <input id="confirmPassword" type="password" formControlName="confirmPassword"
                    placeholder="Confirm Your New Password"
                    class="px-4 py-3 pe-10 bg-white dark:bg-zinc-900 dark:text-white border-solid text-black w-full text-lg border border-zinc-300 dark:border-zinc-700 focus:border-tree-500 rounded outline-none"
                    [class.border-red-500]="changePasswordForm.get('confirmPassword')?.invalid && changePasswordForm.get('confirmPassword')?.touched" />
                  <lucide-icon [name]="KeyRound" strokeWidth="1"
                    class="text-black dark:text-white w-[1.125rem] h-[1.125rem] absolute right-2"></lucide-icon>
                </div>
                @if(changePasswordForm.get('confirmPassword')?.hasError('passwordMismatch') &&
                changePasswordForm.get('confirmPassword')?.touched) {
                <small class="text-red-500 px-2">Passwords do not match</small>
                } @else if(changePasswordForm.get('confirmPassword')?.invalid &&
                changePasswordForm.get('confirmPassword')?.touched) {
                <small class="text-red-500 px-2">Confirm password is required</small>
                }
              </div>

              <div class="flex-[1_1_300px] w-full mt-4">
                <button type="submit" [disabled]="isLoading()"
                  class="px-4 py-3 bg-tree-500 dark:bg-river-800 dark:text-white border-solid text-white w-full text-lg border border-zinc-300 dark:border-zinc-700 focus:border-tree-500 rounded outline-none disabled:opacity-70 disabled:cursor-not-allowed">
                  @if(isLoading()) {
                  <span
                    class="inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></span>
                  }
                  Change Password
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>