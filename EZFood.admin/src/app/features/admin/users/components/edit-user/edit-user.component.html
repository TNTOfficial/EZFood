<div class="min-h-screen bg-gray-50 dark:bg-gray-900">
  <app-toast-container></app-toast-container>
  <div class="container max-w-4xl mx-auto p-4">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold text-gray-800 dark:text-white">Edit Profile</h1>
    </div>

    <!-- Messages -->
    @if (error()) {
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 relative" role="alert">
      <span class="block sm:inline">{{ error() }}</span>
    </div>
    }

    @if (success()) {
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 relative" role="alert">
      <span class="block sm:inline">{{ success() }}</span>
    </div>
    }

    <!-- Loading Spinner -->
    @if (loading()) {
    <div class="flex justify-center my-8">
      <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
    </div>
    } @else {
    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="bg-white dark:bg-gray-800 shadow-md rounded-lg p-6">
      <!-- User Code (Read-only) -->
      <div class="mb-6">
        <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="userCode">
          User Code
        </label>
        <div class="flex">
          <span class="inline-flex items-center px-3 text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 rounded-l-md border border-r-0 border-gray-300 dark:border-gray-600">

          </span>
          <input type="text"
                 id="userCode"
                 formControlName="userCode"
                 class="bg-gray-100 appearance-none border border-gray-300 rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                 readonly />
        </div>
      </div>

      <!-- Network Information Section (Read-only) -->
      <div class="mb-6">
        <h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Network Information</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <!-- Sponsor ID -->
          <div>
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="sponsorId">
              Sponsor ID
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 rounded-l-md border border-r-0 border-gray-300 dark:border-gray-600">

              </span>
              <input type="text"
                     id="sponsorId"
                     formControlName="sponsorId"
                     class="bg-gray-100 appearance-none border border-gray-300 rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     readonly />
            </div>
          </div>

          <!-- Placement ID -->
          <div>
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="placementId">
              Placement ID
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 rounded-l-md border border-r-0 border-gray-300 dark:border-gray-600">

              </span>
              <input type="text"
                     id="placementId"
                     formControlName="placementId"
                     class="bg-gray-100 appearance-none border border-gray-300 rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     readonly />
            </div>
          </div>


          <div>
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="sponsorUserName">
              Sponsor Name
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 rounded-l-md border border-r-0 border-gray-300 dark:border-gray-600">

              </span>
              <input type="text"
                     id="sponsorUserName"
                     formControlName="sponsorUserName"
                     class="bg-gray-100 appearance-none border border-gray-300 rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     readonly />
            </div>
          </div>


          <div>
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="placementUserName">
              Placement Name
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 rounded-l-md border border-r-0 border-gray-300 dark:border-gray-600">

              </span>
              <input type="text"
                     id="placementUserName"
                     formControlName="placementUserName"
                     class="bg-gray-100 appearance-none border border-gray-300 rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     readonly />
            </div>
          </div>

        </div>
      </div>

      <!-- Personal Information Section -->
      <div class="mb-6">
        <h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Personal Information</h2>

        <!-- Name with Title -->
        <div class="flex flex-col sm:flex-row gap-4 mb-4">
          <div class="w-full sm:w-1/4">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="nameTitle">
              Title
            </label>
            <select id="nameTitle"
                    formControlName="nameTitle"
                    class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white">
              @for (title of titleOptions; track title) {
              <option [value]="title">{{ title }}</option>
              }
            </select>
          </div>
          <div class="w-full sm:w-3/4">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="name">
              Name <span class="text-red-500">*</span>
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

              </span>
              <input type="text"
                     id="name"
                     formControlName="name"
                     class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     placeholder="Your full name" />
            </div>
            @if ((profileForm.get('name')?.invalid && profileForm.get('name')?.touched)) {
            <p class="text-red-500 text-xs italic mt-1">Name is required (max 60 characters)</p>
            }
          </div>
        </div>

        <!-- Guardian Information -->
        <div class="flex flex-col sm:flex-row gap-4 mb-4">
          <div class="w-full sm:w-1/4">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="relation">
              Relation
            </label>
            <select id="relation"
                    formControlName="relation"
                    class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white">
              @for (relation of relationOptions; track relation) {
              <option [value]="relation">{{ relation }}</option>
              }
            </select>
          </div>
          <div class="w-full sm:w-3/4">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="guardianName">
              Father's/Husband's Name
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

              </span>
              <input type="text"
                     id="guardianName"
                     formControlName="guardianName"
                     class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     placeholder="Guardian's name" />
            </div>
          </div>
        </div>

        <!-- Gender and DOB -->
        <div class="flex flex-col sm:flex-row gap-4 mb-4">
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2">
              Gender <span class="text-red-500">*</span>
            </label>
            <div class="flex gap-4">
              <label class="inline-flex items-center">
                <input type="radio"
                       formControlName="gender"
                       value="Male"
                       class="form-radio h-4 w-4 text-blue-600 dark:text-blue-400" />
                <span class="ml-2 text-gray-700 dark:text-gray-300">Male</span>
              </label>
              <label class="inline-flex items-center">
                <input type="radio"
                       formControlName="gender"
                       value="Female"
                       class="form-radio h-4 w-4 text-blue-600 dark:text-blue-400" />
                <span class="ml-2 text-gray-700 dark:text-gray-300">Female</span>
              </label>
              <label class="inline-flex items-center">
                <input type="radio"
                       formControlName="gender"
                       value="Other"
                       class="form-radio h-4 w-4 text-blue-600 dark:text-blue-400" />
                <span class="ml-2 text-gray-700 dark:text-gray-300">Other</span>
              </label>
            </div>
            @if ((profileForm.get('gender')?.invalid && profileForm.get('gender')?.touched)) {
            <p class="text-red-500 text-xs italic mt-1">Gender is required</p>
            }
          </div>
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="dateOfBirth">
              Date of Birth
            </label>
            <div class="relative">
              <div class="flex">
                <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

                </span>
                <input type="date"
                       id="dateOfBirth"
                       formControlName="dateOfBirth"
                       class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white" />
              </div>
              <div class="absolute inset-y-0 right-0 flex items-center px-2 cursor-pointer"
                   (click)="openDatePicker($event)">
              </div>
            </div>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="flex flex-col sm:flex-row gap-4 mb-4">
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="email">
              Email
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

              </span>
              <input type="email"
                     id="email"
                     formControlName="email"
                     class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     placeholder="your.email@example.com" />
            </div>
            @if ((profileForm.get('email')?.invalid && profileForm.get('email')?.touched) ) {
            <p class="text-red-500 text-xs italic mt-1">Please enter a valid email address</p>
            }
          </div>
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="phoneNumber">
              Phone Number <span class="text-red-500">*</span>
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

              </span>
              <input type="tel"
                     id="phoneNumber"
                     formControlName="phoneNumber"
                     class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     placeholder="10-digit phone number" />
            </div>
            @if ((profileForm.get('phoneNumber')?.invalid && profileForm.get('phoneNumber')?.touched) ) {
            <p class="text-red-500 text-xs italic mt-1">Please enter a valid 10-digit phone number</p>
            }
          </div>
        </div>

        <!-- Marital Status and Profession -->
        <div class="flex flex-col sm:flex-row gap-4 mb-4">
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="martialStatus">
              Marital Status
            </label>
            <select id="martialStatus"
                    formControlName="martialStatus"
                    class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white">
              <option value="">Select status</option>
              <option value="Single">Single</option>
              <option value="Married">Married</option>
              <option value="Divorced">Divorced</option>
              <option value="Widowed">Widowed</option>
            </select>
          </div>
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="profession">
              Profession
            </label>
            <select id="profession"
                    formControlName="profession"
                    class="appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white">
              <option value="">Select profession</option>
              @for (profession of professionOptions; track profession) {
              <option [value]="profession">{{ profession }}</option>
              }
            </select>
          </div>
        </div>

        <!-- ID Numbers -->
        <div class="flex flex-col sm:flex-row gap-4 mb-4">
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="voterNumber">
              Voter ID Number
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

              </span>
              <input type="text"
                     id="voterNumber"
                     formControlName="voterNumber"
                     class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     placeholder="Voter ID Number" />
            </div>
          </div>
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="gstNumber">
              GST Number
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

              </span>
              <input type="text"
                     id="gstNumber"
                     formControlName="gstNumber"
                     class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     placeholder="GST Number" />
            </div>
          </div>
        </div>
      </div>

      <!-- Address Information Section -->
      <div class="mb-6">
        <h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Address Information</h2>

        <!-- Address -->
        <div class="mb-4">
          <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="address">
            Address <span class="text-red-500">*</span>
          </label>
          <div class="flex">
            <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

            </span>
            <input type="text"
                   id="address"
                   formControlName="address"
                   class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                   placeholder="Your full address" />
          </div>
          @if ((profileForm.get('address')?.invalid && profileForm.get('address')?.touched) ) {
          <p class="text-red-500 text-xs italic mt-1">Address is required</p>
          }
        </div>

        <!-- State and City -->
        <div class="flex flex-col sm:flex-row gap-4 mb-4">
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="stateId">
              State <span class="text-red-500">*</span>
            </label>
            <app-searchable-dropdown [items]="states" formControlName="stateId" placeholder="Select State"
                                     [valueProperty]="'id'" [displayProperty]="'name'"
                                     (selectionChange)="onStateChange($event)"></app-searchable-dropdown>
            @if (profileForm.get('stateId')?.touched &&
            profileForm.get('stateId')?.errors?.['required']) {
            <div class="text-red-500 text-sm mt-1">State is required.</div>
            }

          </div>
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="cityId">
              City <span class="text-red-500">*</span>
            </label>
            <app-searchable-dropdown [items]="cities" formControlName="cityId" placeholder="Select City"
                                     [valueProperty]="'id'" [displayProperty]="'name'"></app-searchable-dropdown>
            @if (profileForm.get('cityId')?.touched &&
            profileForm.get('cityId')?.errors?.['required']) {
            <div class="text-red-500 text-sm mt-1">City is required.</div>
            }
          </div>
        </div>

        <!-- Country and Pin Code -->
        <div class="flex flex-col sm:flex-row gap-4 mb-4">
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="country">
              Country <span class="text-red-500">*</span>
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

              </span>
              <input type="text"
                     id="country"
                     formControlName="country"
                     class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     placeholder="Country" />
            </div>
            @if ((profileForm.get('country')?.invalid && profileForm.get('country')?.touched) ) {
            <p class="text-red-500 text-xs italic mt-1">Country is required</p>
            }
          </div>
          <div class="w-full sm:w-1/2">
            <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="pinCode">
              PIN Code <span class="text-red-500">*</span>
            </label>
            <div class="flex">
              <span class="inline-flex items-center px-3 text-gray-500 bg-gray-50 rounded-l-md border border-r-0 border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300">

              </span>
              <input type="text"
                     id="pinCode"
                     formControlName="pinCode"
                     class="appearance-none border rounded-r-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                     placeholder="6-digit PIN code" />
            </div>
            @if ((profileForm.get('pinCode')?.invalid && profileForm.get('pinCode')?.touched) ) {
            <p class="text-red-500 text-xs italic mt-1">Please enter a valid 6-digit PIN code</p>
            }
          </div>
        </div>
      </div>


      <!-- Bank Details Section (Read-only) -->
      <div formGroupName="bankAccount">

        <div class="flex justify-center items-stretch flex-wrap gap-6 dropdown-container">
          <div class="flex-[1_1_18.75rem] relative">
            <label for="bankName" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
              Bank Name
            </label>
            <app-searchable-dropdown [items]="banks" formControlName="bankName" placeholder="Select Bank"
                                     [valueProperty]="'name'" [displayProperty]="'name'" (selectionChange)="selectBank($event)">

            </app-searchable-dropdown>
            <!-- Error message -->
            @if (profileForm.get('bankAccount.bankName')?.touched &&
            profileForm.get('bankAccount.bankName')?.errors?.['required']) {
            <div class="text-red-500 text-sm mt-1">
              Bank Name is required.
            </div>
            }
          </div>


          <div class="flex-[1_1_18.75rem]">
            <label for="branchName" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
              Branch Name
            </label>
            <div class="relative flex items-center">
              <input id="branchName" type="text" formControlName="branchName" placeholder="Branch Name"
                     class="px-4 py-4 pe-10 text-base bg-zinc-100/80 dark:bg-zinc-800 dark:text-white border-solid text-black w-full border border-zinc-400 dark:border-zinc-600 focus:border-tree-500 rounded outline-none" />
              <i-lucide [img]="TextCursor" strokeWidth="1"
                        class="text-black dark:text-white md:size-5 size-6 absolute right-2"></i-lucide>
            </div>
          </div>

          <div class="flex-[1_1_18.75rem]">
            <label for="accountNumber" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
              Account Number
            </label>
            <div class="relative flex items-center">
              <input id="accountNumber" type="text" formControlName="accountNumber" placeholder="Account Number"
                     class="px-4 py-4 pe-10 text-base bg-zinc-100/80 dark:bg-zinc-800 dark:text-white border-solid text-black w-full border border-zinc-400 dark:border-zinc-600 focus:border-tree-500 rounded outline-none" />
              <i-lucide [img]="CreditCard" strokeWidth="1"
                        class="text-black dark:text-white md:size-5 size-6 absolute right-2"></i-lucide>
            </div>
            @if (profileForm.get('bankAccount.accountNumber')?.touched
            &&
            profileForm.get('bankAccount.accountNumber')?.errors?.['required'])
            {
            <div class="text-red-500 text-sm mt-1">
              Account Number is required.
            </div>
            } @if
            (profileForm.get('bankAccount.accountNumber')?.touched &&
            profileForm.get('bankAccount.accountNumber')?.errors?.['pattern'])
            {
            <div class="text-red-500 text-sm mt-1">
              Please enter a valid account number (9-18 digits).
            </div>
            }
          </div>


          <div class="flex-[1_1_18.75rem]">
            <label for="ifscCode" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
              IFSC Code
            </label>
            <div class="relative flex items-center">
              <input id="ifscCode" type="text" formControlName="ifscCode" placeholder="IFSC Code"
                     class="px-4 py-4 pe-10 text-base bg-zinc-100/80 dark:bg-zinc-800 dark:text-white border-solid text-black w-full border border-zinc-400 dark:border-zinc-600 focus:border-tree-500 rounded outline-none" />
              <i-lucide [img]="CreditCard" strokeWidth="1"
                        class="text-black dark:text-white md:size-5 size-6 absolute right-2"></i-lucide>
            </div>
            @if (profileForm.get('bankAccount.ifscCode')?.touched &&
            profileForm.get('bankAccount.ifscCode')?.errors?.['required'])
            {
            <div class="text-red-500 text-sm mt-1">
              IFSC Code is required.
            </div>
            } @if (profileForm.get('bankAccount.ifscCode')?.touched &&
            profileForm.get('bankAccount.ifscCode')?.errors?.['pattern'])
            {
            <div class="text-red-500 text-sm mt-1">
              Please enter a valid IFSC code.
            </div>
            }
          </div>

          <div class="flex-[1_1_18.75rem]">
            <label for="panNumber" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
              PAN Number
            </label>
            <div class="relative flex items-center">
              <input id="panNumber" type="text" formControlName="panNumber" placeholder="PAN Number"
                     class="px-4 py-4 pe-10 text-base bg-zinc-100/80 dark:bg-zinc-800 dark:text-white border-solid text-black w-full border border-zinc-400 dark:border-zinc-600 focus:border-tree-500 rounded outline-none" />
              <i-lucide [img]="CreditCard" strokeWidth="1"
                        class="text-black dark:text-white md:size-5 size-6 absolute right-2"></i-lucide>
            </div>
            @if (profileForm.get('bankAccount.panNumber')?.touched &&
            profileForm.get('bankAccount.panNumber')?.errors?.['required'])
            {
            <div class="text-red-500 text-sm mt-1">
              PAN Number is required.
            </div>
            } @if (profileForm.get('bankAccount.panNumber')?.touched &&
            profileForm.get('bankAccount.panNumber')?.errors?.['pattern'])
            {
            <div class="text-red-500 text-sm mt-1">
              Please enter a valid PAN number.
            </div>
            }
          </div>

          <div class="flex-[1_1_18.75rem]">
            <label for="aadharNumber" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
              Aadhar Number
            </label>
            <div class="relative flex items-center">
              <input id="aadharNumber" type="text" formControlName="aadharNumber" placeholder="Aadhar Number"
                     class="px-4 py-4 pe-10 text-base bg-zinc-100/80 dark:bg-zinc-800 dark:text-white border-solid text-black w-full border border-zinc-400 dark:border-zinc-600 focus:border-tree-500 rounded outline-none" />
              <i-lucide [img]="CreditCard" strokeWidth="1"
                        class="text-black dark:text-white md:size-5 size-6 absolute right-2"></i-lucide>
            </div>
            @if (profileForm.get('bankAccount.aadharNumber')?.touched
            &&
            profileForm.get('bankAccount.aadharNumber')?.errors?.['required'])
            {
            <div class="text-red-500 text-sm mt-1">
              Aadhar Number is required.
            </div>
            } @if (profileForm.get('bankAccount.aadharNumber')?.touched
            &&
            profileForm.get('bankAccount.aadharNumber')?.errors?.['pattern'])
            {
            <div class="text-red-500 text-sm mt-1">
              Please enter a valid 12-digit Aadhar number.
            </div>
            }
          </div>
        </div>


      </div>


      <div formGroupName="coApplicant"
           class="flex justify-center items-stretch flex-wrap gap-6 animate-fade-down pb-6">


        <div class="flex-[1_1_18.75rem]">
          <label for="nomineeName" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
            Nominee Name
          </label>
          <div class="relative flex items-center">
            <input id="nomineeName" type="text" formControlName="nomineeName" placeholder="Nominee Name"
                   class="px-4 py-4 pe-10 text-base bg-zinc-100/80 dark:bg-zinc-800 dark:text-white border-solid text-black w-full border border-zinc-400 dark:border-zinc-600 focus:border-tree-500 rounded outline-none" />
            <i-lucide [img]="TextCursor" strokeWidth="1"
                      class="text-black dark:text-white md:size-5 size-6 absolute right-2"></i-lucide>
          </div>
        </div>

        <div class="flex-[1_1_18.75rem] relative dropdown-container">
          <label for="relation" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
            Relation
          </label>
          <app-searchable-dropdown [items]="relations" formControlName="relation" placeholder="Select Relation"
                                   [valueProperty]="'value'" [displayProperty]="'name'"
                                   (selectionChange)="selectRelation($event)"></app-searchable-dropdown>
        </div>


        <div class="flex-[1_1_18.75rem]">
          <label for="nomineeDob" class="text-[1rem] dark:text-white text-black px-2 mb-3 inline-block">
            Date of Birth
          </label>
          <div class="relative flex items-center">
            <input id="dateOfBirth" type="date" formControlName="dateOfBirth" placeholder="Date of Birth"
                   (click)="openDatePicker($event)"
                   class="px-4 py-4 pe-10 input-appearance-none text-base bg-zinc-100/80 dark:bg-zinc-800 dark:text-white border-solid text-black w-full border border-zinc-400 dark:border-zinc-600 focus:border-tree-500 rounded outline-none" />
            <i-lucide [img]="CalendarDays" strokeWidth="1"
                      class="text-black dark:text-white md:size-5 size-6 absolute right-2"></i-lucide>
          </div>
        </div>
      </div>

      <!-- Action buttons -->
      <div class="flex flex-col sm:flex-row gap-4 mt-8">
        <button type="submit"
                class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:shadow-outline dark:bg-blue-600 dark:hover:bg-blue-700 transition-colors">
          Save Changes
        </button>
      </div>
    </form>
    }
  </div>
</div>
