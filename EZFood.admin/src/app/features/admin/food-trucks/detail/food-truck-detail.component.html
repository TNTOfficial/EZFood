<div class="container mx-auto p-4 bg-white dark:bg-zinc-900 rounded-lg">
  <div class="flex justify-between items-center gap-5">
    <div class="mb-6 flex items-center">
      <button (click)="goBack()"
        class="mr-4 text-gray-500 hover:text-gray-700 dark:text-zinc-300 dark:hover:text-zinc-50">
        <i-lucide [img]="ArrowLeft" class="size-6"></i-lucide>
      </button>
      <h1 class="text-2xl font-semibold text-gray-800 dark:text-white">Food Truck Details</h1>
    </div>

    <div class="status self-start text-end flex gap-1 items-center p-3 bg-zinc-600 dark:bg-zinc-500 rounded-md shadow-lg shadow-zinc-600/10 dark:shadow-zinc-200/10 text-white">
      <h5 class="text-sm font-bold text-white dark:text-white">Status:</h5>
      <h6 class="text-base font-normal text-zinc-100 dark:text-zinc-100">{{ getStatus(truckDetail()!.data.step) }}</h6>
    </div>
  </div>


  <div
    class="bg-white dark:bg-zinc-900 text-black dark:text-white rounded-lg shadow shadow-zinc-100 dark:shadow-zinc-700 border-t border-zinc-200 dark:border-zinc-700 overflow-hidden">
    <!-- Loading State -->
    @if (loading()) {
    <div class="flex justify-center my-8">
      <app-loading-spinner></app-loading-spinner>
    </div>
    }

    <!-- Error State -->
    @if (error()) {
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      <p>{{ error() }}</p>
      <button (click)="loadDetails()" class="mt-2 bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded text-sm">
        Retry
      </button>
    </div>
    }

    <!-- User Profile -->
    @if (!loading() && !error() && truckDetail()) {

    <!-- Step 1 -->
    <div class="accoWrap step_1 border-b border-zinc-200 dark:border-zinc-700 transition-all duration-300">
      <button (click)="stepOpen(1)"
        [class]="step1 ? 'border-b border-l-6 border-l-zinc-700 dark:border-l-zinc-500':'border-b-0 border-l-6 border-l-transparent'"
        class="flex justify-between items-center gap-5 w-full p-5 font-bold border-zinc-200 dark:border-zinc-700 rounded-lg transition-all duration-300">
        <span>Step 1 :- Truck Details</span>
        <div class="arrowicon transition-all duration-300" [class]="step1 ? 'rotate-180':'rotae-0'">
          <i-lucide [img]="ChevronDown" class="size-5"></i-lucide>
        </div>
      </button>
      <div class="transition-all duration-300" [class]="step1  ? 'my-3 grid grid-rows-[1fr]':'grid grid-rows-[0fr]'">
        <div class="overflow-hidden">
          <ul class="gap-3 flex justify-start items-center flex-wrap px-5">
            <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">Truck Name:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 text-nowrap rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ truckDetail()!.data.stepOne.truckName }}</p>
            </li>
            <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">Truck Owner Name:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 text-nowrap rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ truckDetail()!.data.stepOne.truckOwnerName }}</p>
            </li>

            <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">Phone Number:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 text-nowrap rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ truckDetail()!.data.stepOne.phoneNumber }}</p>
            </li>

            <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">Address:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 text-nowrap rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ truckDetail()!.data.stepOne.address }}</p>
            </li>

            <!-- <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">Truck Status:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 text-nowrap rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ getStatus(truckDetail()!.data.step) }}</p>
            </li> -->
          </ul>
        </div>
      </div>

    </div>

    <!-- Step 2 -->
    <div class="accoWrap step_2 border-b border-zinc-200 dark:border-zinc-700 transition-all duration-300">
      <button (click)="stepOpen(2)"
        [class]="step2 ? 'border-b border-l-6 border-l-zinc-700 dark:border-l-zinc-500':'border-b-0 border-l-6 border-l-transparent'"
        class="flex justify-between items-center gap-5 w-full p-5 font-bold border-zinc-200 dark:border-zinc-700 rounded-lg transition-all duration-300">
        <span>Step 2 :- Cuisine Type</span>
        <div class="arrowicon transition-all duration-300" [class]="step2 ? 'rotate-180':'rotae-0'">
          <i-lucide [img]="ChevronDown" class="size-5"></i-lucide>
        </div>
      </button>
      <div class="transition-all duration-300" [class]="step2  ? 'my-3 grid grid-rows-[1fr]':'grid grid-rows-[0fr]'">
        <div class="overflow-hidden">
          <ul class="gap-3 flex justify-start items-center flex-wrap px-5">
            @for(item of truckDetail()!.data.stepTwo.cuisines; track item){
            <li
              class="flex-[1_1_12.5rem] py-2 px-3 rounded-full bg-white dark:bg-zinc-800 border-2 border-tree-400 dark:border-tree-700 flex gap-1 justify-center items-center max-w-fit">
              <i-lucide [img]="BadgeCheck" class="size-6 text-tree-600 dark:text-tree-700" strokeWidth="2"></i-lucide>
              <span class="text-sm font-bold text-gray-800 dark:text-zinc-100">{{item}}</span>
            </li> }
          </ul>
          @if(truckDetail()!.data.stepTwo.isOtherCuisine){
            <p class="ms-7 mt-4 font-medium">Other Cuisines: {{truckDetail()!.data.stepTwo.cuisineNote}}</p>
          }
        </div>
      </div>

    </div>

    <!-- Step-3 -->
    <div class="accoWrap step_3 border-b border-zinc-200 dark:border-zinc-700 transition-all duration-300">
      <button (click)="stepOpen(3)"
        [class]="step3 ? 'border-b border-l-6 border-l-zinc-700 dark:border-l-zinc-500':'border-b-0 border-l-6 border-l-transparent'"
        class="flex justify-between items-center gap-5 w-full p-5 font-bold border-zinc-200 dark:border-zinc-700 rounded-lg transition-all duration-300">
        <span>Step 3 :- Business Details & Description</span>
        <div class="arrowicon transition-all duration-300" [class]="step3 ? 'rotate-180':'rotae-0'">
          <i-lucide [img]="ChevronDown" class="size-5"></i-lucide>
        </div>
      </button>
      <div class="transition-all duration-300" [class]="step3  ? 'my-3 grid grid-rows-[1fr]':'grid grid-rows-[0fr]'">
        <div class="overflow-hidden">
          <ul class="gap-3 flex justify-start items-stretch flex-wrap px-5">

            <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">Bussiness Start Year:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ truckDetail()!.data.stepThree.bussinessStartYear }}</p>
            </li>

            <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">EIN:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ truckDetail()!.data.stepThree.ein }}</p>
            </li>

            <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex gap-3 items-end justify-between">

              <div
                [class]="truckDetail()!.data.stepThree.isBreakfast == true ? ' border-tree-400 dark:border-tree-700': ' border-red-400 dark:border-red-400'"
                class="flex-[1_1_12.5rem] py-2 px-3 rounded-full bg-white dark:bg-zinc-800 border-2 flex gap-1 justify-center items-center max-w-fit max-h-fit">
                <i-lucide
                  [class]="truckDetail()!.data.stepThree.isBreakfast == true ? '  text-tree-600 dark:text-tree-700 ': '  text-red-500 dark:text-red-400 '"
                  [img]="truckDetail()!.data.stepThree.isBreakfast == true ? BadgeCheck : CircleX" class="size-6"
                  strokeWidth="2"></i-lucide>
                <span class="text-sm font-bold text-gray-800 dark:text-zinc-100"> BreakFast </span>
              </div>
              <div
                [class]="truckDetail()!.data.stepThree.isLunch == true ? ' border-tree-400 dark:border-tree-700': ' border-red-400 dark:border-red-400'"
                class="flex-[1_1_12.5rem] py-2 px-3 rounded-full bg-white dark:bg-zinc-800 border-2 flex gap-1 justify-center items-center max-w-fit max-h-fit">
                <i-lucide
                  [class]="truckDetail()!.data.stepThree.isLunch == true ? '  text-tree-600 dark:text-tree-700 ': '  text-red-500 dark:text-red-400 '"
                  [img]="truckDetail()!.data.stepThree.isLunch == true ? BadgeCheck : CircleX" class="size-6"
                  strokeWidth="2"></i-lucide>
                <span class="text-sm font-bold text-gray-800 dark:text-zinc-100"> Lunch</span>
              </div>
              <div
                [class]="truckDetail()!.data.stepThree.isDinner == true ? ' border-tree-400 dark:border-tree-700': ' border-red-400 dark:border-red-400'"
                class="flex-[1_1_12.5rem] py-2 px-3 rounded-full bg-white dark:bg-zinc-800 border-2 flex gap-1 justify-center items-center max-w-fit max-h-fit">
                <i-lucide
                  [class]="truckDetail()!.data.stepThree.isDinner == true ? '  text-tree-600 dark:text-tree-700 ': '  text-red-500 dark:text-red-400 '"
                  [img]="truckDetail()!.data.stepThree.isDinner == true ? BadgeCheck : CircleX" class="size-6"
                  strokeWidth="2"></i-lucide>
                <span class="text-sm font-bold text-gray-800 dark:text-zinc-100"> Dinner</span>
              </div>
            </li>

            <li
              class="flex-[1_1_12.5rem] py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">Minimum Guarantee Amount:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ truckDetail()!.data.stepThree.minimumGuaranteeAmount }}
              </p>
            </li>

            <li
              class="flex-[1_1_12.5rem] min-w-full py-2 px-0 rounded-md bg-white dark:bg-zinc-800 flex flex-col gap-3 items-stretch justify-center">
              <p class="text-sm font-bold text-gray-800 dark:text-zinc-100">Business Description:</p>
              <p
                class="text-zinc-700 dark:text-zinc-300 p-3 rounded border border-zinc-200 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800">
                {{ truckDetail()!.data.stepThree.businessDescription }}</p>
            </li>
          </ul>

          <h3 class="mb-4 mt-10 text-lg text-zinc-700 dark:text-zinc-300 font-bold px-5">
            Uploaded Documents
          </h3>

          <ul
            class="flex flex-wrap gap-3 items-stretch justify-center divide-zinc-200 dark:divide-zinc-700 px-4 overflow-hidden">
            <li
              class="flex-1 border border-zinc-200 dark:border-zink-700 rounded-lg bg-zinc-50 dark:bg-zinc-800 px-4 py-2 flex gap-3 justify-between items-center">
              <div class="titel flex justify-strat items-center gap-1 text-sm font-bold ">
                <i-lucide [img]="checkDocType(truckDetail()!.data.stepThree.coi) == 'pdf' ? FileText : Image" class="size-6 text-zinc-500 dark:text-zinc-300"></i-lucide>
                <span class="text-nowrap">COI</span>
              </div>
              @if(checkDocType(truckDetail()!.data.stepThree.coi) == "pdf"){
              <button (click)="openPdf(truckDetail()!.data.stepThree.coi)"
                class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                  [img]="View" class="size-5"></i-lucide><span>View Document</span>
              </button>

              } @else {
              <button (click)="viewDocument(truckDetail()!.data.stepThree.coi!)"
                class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                  [img]="View" class="size-5"></i-lucide><span>View Document</span>
              </button>
              }
            </li>
            <li
              class="flex-1 border border-zinc-200 dark:border-zink-700 rounded-lg bg-zinc-50 dark:bg-zinc-800 px-4 py-2 flex gap-3 justify-between items-center">
              <div class="titel flex justify-strat items-center gap-1 text-sm font-bold ">
                <i-lucide [img]="checkDocType(truckDetail()!.data.stepThree.w9) == 'pdf' ? FileText : Image" class="size-6 text-zinc-500 dark:text-zinc-300"></i-lucide>
                <span class="text-nowrap">W9</span>
              </div>
              @if(checkDocType(truckDetail()!.data.stepThree.w9) == "pdf"){
              <button (click)="openPdf(truckDetail()!.data.stepThree.w9)"
                class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                  [img]="View" class="size-5"></i-lucide><span>View Document</span></button>

              } @else {
              <button (click)="viewDocument(truckDetail()!.data.stepThree.w9!)"
                class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                  [img]="View" class="size-5"></i-lucide><span>View Document</span></button>
              }
            </li>
            <li
              class="flex-1 border border-zinc-200 dark:border-zink-700 rounded-lg bg-zinc-50 dark:bg-zinc-800 px-4 py-2 flex gap-3 justify-between items-center">
              <div class="titel flex justify-strat items-center gap-1 text-sm font-bold ">
                <i-lucide [img]="checkDocType(truckDetail()!.data.stepThree.serveSafeCertificate) == 'pdf' ? FileText : Image" class="size-6 text-zinc-500 dark:text-zinc-300"></i-lucide>
                <span class="text-nowrap">Serve Safe Certificate</span>
              </div>
              @if(checkDocType(truckDetail()!.data.stepThree.serveSafeCertificate) == "pdf"){
              <button (click)="openPdf(truckDetail()!.data.stepThree.serveSafeCertificate)"
                class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                  [img]="View" class="size-5"></i-lucide><span>View Document</span></button>

              } @else {
              <button (click)="viewDocument(truckDetail()!.data.stepThree.serveSafeCertificate!)"
                class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                  [img]="View" class="size-5"></i-lucide><span>View Document</span></button>
              }
            </li>
            <li
              class="flex-1 border border-zinc-200 dark:border-zink-700 rounded-lg bg-zinc-50 dark:bg-zinc-800 px-4 py-2 flex gap-3 justify-between items-center">
              <div class="titel flex justify-strat items-center gap-1 text-sm font-bold ">
                <i-lucide [img]="checkDocType(truckDetail()!.data.stepThree.dchCertificate) == 'pdf' ? FileText : Image" class="size-6 text-zinc-500 dark:text-zinc-300"></i-lucide>
                <span class="text-nowrap">DCH Certificate</span>
              </div>
              @if(checkDocType(truckDetail()!.data.stepThree.dchCertificate) == "pdf"){
              <button (click)="openPdf(truckDetail()!.data.stepThree.dchCertificate)"
                class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                  [img]="View" class="size-5"></i-lucide><span>View Document</span></button>

              } @else {
              <button (click)="viewDocument(truckDetail()!.data.stepThree.dchCertificate!)"
                class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                  [img]="View" class="size-5"></i-lucide><span>View Document</span></button>
              }
            </li>
          </ul>


        </div>
      </div>
    </div>

    <!-- Step-4 -->
    <div class="accoWrap step_4 border-b border-zinc-200 dark:border-zinc-700 transition-all duration-300">
      <button (click)="stepOpen(4)"
        [class]="step4 ? 'border-b border-l-6 border-l-zinc-700 dark:border-l-zinc-500':'border-b-0 border-l-6 border-l-transparent'"
        class="flex justify-between items-center gap-5 w-full p-5 font-bold border-zinc-200 dark:border-zinc-700 rounded-lg transition-all duration-300">
        <span>Step 4 :- Truck Photos</span>
        <div class="arrowicon transition-all duration-300" [class]="step4 ? 'rotate-180':'rotae-0'">
          <i-lucide [img]="ChevronDown" class="size-5"></i-lucide>
        </div>
      </button>
      <div class="transition-all duration-300" [class]="step4  ? 'my-3 grid grid-rows-[1fr]':'grid grid-rows-[0fr]'">
        <div class="overflow-hidden">
          <div class="flex flex-wrap justify-start items-stretch gap-5 mt-4 px-5">
            @for(item of truckDetail()!.data.stepFour.files; track item; let i = $index){
            <div class="flex-[1_1_18.75rem] max-w-fit">
              <div
                class="flex-1 border border-zinc-200 dark:border-zink-700 rounded-lg bg-zinc-50 dark:bg-zinc-800 px-4 py-2 flex gap-3 justify-between items-center">
                <div class="titel flex justify-strat items-center gap-1 text-sm font-bold ">
                  <i-lucide [img]="Image" class="size-6 text-zinc-500 dark:text-zinc-300"></i-lucide>
                  <span class="text-nowrap">Image {{i + 1}}</span>
                </div>

                <button (click)="viewDocument(item)"
                  class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                    [img]="View" class="size-5"></i-lucide><span>View Document</span></button>


              </div>
            </div>
            }
          </div>
        </div>
      </div>

    </div>
    <!-- Step-5 -->
    <div class="accoWrap step_5 border-b border-zinc-200 dark:border-zinc-700 transition-all duration-300">
      <button (click)="stepOpen(5)"
        [class]="step5 ? 'border-b border-l-6 border-l-zinc-700 dark:border-l-zinc-500':'border-b-0 border-l-6 border-l-transparent'"
        class="flex justify-between items-center gap-5 w-full p-5 font-bold border-zinc-200 dark:border-zinc-700 rounded-lg transition-all duration-300">
        <span>Step 5 :- Truck Menus</span>
        <div class="arrowicon transition-all duration-300" [class]="step5 ? 'rotate-180':'rotae-0'">
          <i-lucide [img]="ChevronDown" class="size-5"></i-lucide>
        </div>
      </button>
      <div class="transition-all duration-300" [class]="step5  ? 'my-3 grid grid-rows-[1fr]':'grid grid-rows-[0fr]'">
        <div class="overflow-hidden">
          <div class="flex flex-wrap justify-start items-stretch gap-5 mt-4 px-5">
            @for(item of truckDetail()!.data.stepFive.files; track item; let i = $index){
            <div class="flex-[1_1_18.75rem] max-w-fit">
              <div
                class="flex-1 border border-zinc-200 dark:border-zink-700 rounded-lg bg-zinc-50 dark:bg-zinc-800 px-4 py-2 flex gap-3 justify-between items-center">
                <div class="titel flex justify-strat items-center gap-1 text-sm font-bold ">
                  <i-lucide [img]="checkDocType(item) == 'pdf' ? FileText : Image" class="size-6 text-zinc-500 dark:text-zinc-300"></i-lucide>
                  <span class="text-nowrap">Menu {{i + 1}}</span>
                </div>


                @if(checkDocType(item) == "pdf"){
                <button (click)="openPdf(item)"
                  class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                    [img]="View" class="size-5"></i-lucide><span>View Document</span></button>

                } @else {
                <button (click)="viewDocument(item)"
                  class="text-sm font-medium bg-zinc-500 hover:bg-tree-600 cursor-pointer dark:bg-zinc-700 text-nowrap px-3 py-3.5 rounded text-white flex justify-center items-center gap-1"><i-lucide
                    [img]="View" class="size-5"></i-lucide><span>View Document</span></button>
                }
              </div>
            </div>
            }
          </div>
        </div>
      </div>

    </div>
    }
  </div>



  @if(!loading() && !error() && truckDetail() && truckDetail()!.data.step == OnboardingStatus.Submitted){
  <!-- Reaction of Approval, Reject, Refer Back -->
  <div
    class="reaction p-3 mt-5 rounded-md bg-white dark:bg-zinc-900  shadow shadow-zinc-100 dark:shadow-zinc-700  border-t border-zinc-200 dark:border-zinc-700 flex justify-end items-center gap-3 ">
    <button (click)="openReactionModal(OnboardingStatus.Approved)"
      class="text-sm font-medium bg-tree-500 hover:bg-tree-600 cursor-pointer dark:bg-tree-500 text-nowrap px-4 py-3.5 rounded text-white flex justify-center items-center gap-1">
      <i-lucide [img]="ClipboardCheck" class="size-5"></i-lucide>
      <span>Approval</span>
    </button>

    <button (click)="openReactionModal(OnboardingStatus.ReferBack)"
      class="text-sm font-medium bg-yellow-600 hover:bg-yellow-700 cursor-pointer dark:bg-yellow-600 text-nowrap px-4 py-3.5 rounded text-white flex justify-center items-center gap-1">
      <i-lucide [img]="ListRestart" class="size-5"></i-lucide>
      <span>Refer Back</span>
    </button>

    <button (click)="openReactionModal(OnboardingStatus.Rejected)"
      class="text-sm font-medium bg-red-600 hover:bg-red-700 cursor-pointer dark:bg-red-600 text-nowrap px-4 py-3.5 rounded text-white flex justify-center items-center gap-1">
      <i-lucide [img]="GitPullRequestClosed" class="size-5"></i-lucide>
      <span>Reject</span>
    </button>
  </div>
  }


  <!-- Modal Document Viewer -->

  <div [class]="isModalOpen ? 'opacity-100 z-[990] delay-0':'opacity-0 -z-10 delay-600'"
    class="modal fixed inset-0 bg-black/50 transition-all duration-300 flex justify-center items-center opacity-0 -z-10 ">
    <div [class]="isModalOpen ? 'scale-y-100 delay-300':'scale-y-0 delay-300'"
      class="max-w-7xl min-w-[200px] w-fit bg-white dark:bg-zinc-800 p-2 rounded-lg relative z-0 transition-transform duration-300 h-full max-h-[80dvh] scale-y-0">
      <div (click)="closeDocument()"
        class="closeButton size-10 shadow rounded-full bg-white dark:bg-zinc-600 text-red-700 absolute me-3 top-4 right-4 z-10 flex justify-center items-center cursor-pointer">
        <i-lucide [img]="X"></i-lucide>
      </div>
      <div
        class="download size-10 shadow rounded-full bg-white dark:bg-zinc-600 text-blue-700 dark:text-blue-300 absolute ml-3 top-4 left-4 z-10 flex justify-center items-center cursor-pointer">
        <i-lucide [img]="Download"></i-lucide>
      </div>
      <img [src]="imageService.getImageUrl(imageSRC)" alt="Document" class="h-full w-full object-contain  block  ">

    </div>
  </div>
  <app-pdf-viewer [dataUrl]="pdfData" [isVisible]="(pdfViewerService.isModalVisible$ | async)"
    (closeModal)="pdfViewerService.hideModal()">
  </app-pdf-viewer>
  <div [class]="isReactionModalOpen ? 'opacity-100 z-[990] delay-0':'opacity-0 -z-10 delay-600'"
    class="modal fixed inset-0 bg-black/50 transition-all duration-300 flex justify-center items-center opacity-0 -z-10 ">
    <div [class]="isReactionModalOpen ? 'scale-100 delay-300':'scale-0 delay-300'"
      class="max-w-lg w-full bg-white dark:bg-zinc-800 p-5 rounded-lg relative z-0 transition-transform duration-300 max-h-[80dvh] overflow-y-auto">
      <form [formGroup]="rForm" (ngSubmit)="rForm.markAllAsTouched(); rForm.valid && submitAction()">
        <h3 class="text-xl font-bold text-zinc-700 dark:text-zinc-50 mb-1">{{modalTitle()}} Onboarding Request</h3>
        <p class="text-zinc-600 text-base font-medium mb-3">Are you sure to submit response to onboarding request?.</p>
        @if(rForm.get('onboardingStatus')?.value != OnboardingStatus.Approved){
        <div class="mb-3">
          <label for="note" class="text-sm text-zinc-600 dark:text-zinc-200 font-bold inline-block mb-2"> Response
            Note</label>
          <textarea id="note" formControlName="note" placeholder="Enter note" id="reasons" rows="5"
            class="px-4 py-2 text-sm bg-zinc-100/80 dark:bg-zinc-800 dark:text-white border-solid text-black w-full border border-zinc-400 dark:border-zinc-600 focus:border-tree-500 rounded outline-none"></textarea>
          @if (rForm.get('note')?.invalid && rForm.get('note')?.touched) {
          <p class="mt-1 text-sm text-red-500">
            @if (rForm.get('note')?.errors?.['required']) {
            Note is required
            } @else if (rForm.get('note')?.errors?.['maxlength']) {
            Note cannot exceed 200 characters
            }
          </p>
          }
        </div>
        }

        <div class="btuns flex gap-3 justify-end items-stertch">
          <button
            class="rounded flex-1 text-sm font-semibold text-white dark:text-white bg-tree-600 dark:bg-tree-600 hover:bg-tree-700 py-3 px-4 flex gap-1 justify-center items-center"
            type="submit"><i-lucide [img]="CircleCheckBig" class="size-6"></i-lucide>
            <span>{{modalTitle()}}</span></button>
          <button type="button"
            class="rounded flex-1 text-sm font-semibold text-white dark:text-white bg-zinc-600 dark:bg-zinc-600 hover:bg-zinc-700 py-3 px-4 flex gap-1 justify-center items-center"
            (click)="closeReactionModal()"><i-lucide [img]="CircleX" class="size-6"></i-lucide>
            <span>Cancel</span></button>
        </div>
      </form>
    </div>
  </div>
